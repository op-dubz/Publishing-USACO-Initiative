
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- IMPORTANT FOR THE BLACK BACKGROUND ABOVE -->
  <title>Main Page</title>
  <link rel="stylesheet" href="main_page.css"> 
</head>
<body>
  <div class="top-bar">
    <!-- <div class="image-container">
      
    </div> --> 
    <div class="left-buttons"> 
      <!-- USACO Initiative Main Transparent Logo.png Screenshot 2024-10-09 at 3.09.53â€¯PM.png -->
      <img src = "USACO Initiative Main Transparent Logo.png" alt="Icon" class="icon">
      <button class="button" onclick="window.location.href='main_page.html';">Home</button> <!-- Home -->
      <button class="button" onclick="window.location.href='course_info.html';">Course Information</button> <!-- Course Information -->
      <button class="button" onclick="window.location.href='course_sessions.html';">Sign Up</button> <!-- Course Sessions -->
    </div> 
    <div class="right-buttons">
      <!-- <button class="button" id="login-btn" onclick="window.location.href='login_page.html';">Login</button>  -->
      <!-- <button class="button" id="signup-btn" onclick = "window.location.href='signup_page.html';">Sign Up</button> Sign Up  -->
      <!-- "Logout" button will be added dynamically here if the user is logged in -->
    </div> 
  </div> 

  <!-- Blue box to welcome the user -->
  <div id="welcome-box" class="blue-box hidden">
    Welcome <span id="username-display"></span>!
  </div> 

  <!-- <button onclick="resetDatabase()">Reset User Data</button>  To reset every username/email/password in the database -->

  <script> // change to javascript  
    // Function to reset database (optional) 
    function resetDatabase() {
      localStorage.clear(); 
    }
    console.log("Is Logged In?", localStorage.getItem('isLoggedIn'));
    // Check if user is logged in
    // Check if the user is logged in by checking a flag stored in localStorage
    if (localStorage.getItem('isLoggedIn') === 'true') {
      const username = localStorage.getItem('username'); // Retrieve the stored username
      document.getElementById('username-display').textContent = username; // Display the username
      
      // Make the blue welcome box visible
      const welcomeBox = document.getElementById('welcome-box');
      welcomeBox.classList.remove('hidden'); 
      
      // Hide the "Login" and "Sign Up" buttons
      document.getElementById('login-btn').style.display = 'none';
      document.getElementById('signup-btn').style.display = 'none';

      // Create "Logout" button dynamically
      const rightButtons = document.querySelector('.right-buttons');
      const logoutButton = document.createElement('button');
      logoutButton.textContent = 'Logout'; // Set the button text 
      logoutButton.classList.add('button'); // Apply the same button styles
      
      // Define the behavior when the "Logout" button is clicked
      logoutButton.onclick = function() {
        localStorage.setItem('isLoggedIn', 'false'); // Mark user as logged out by updating localStorage
        window.location.reload(); // // Refresh the page to reflect the logout (Login/Sign Up buttons should appear again)
      }; 
      rightButtons.appendChild(logoutButton); // Append the "Logout" button to the right button group 
    } 
    else { 
      document.getElementById('welcome-box').classList.add('hidden'); // Ensure the blue box remains hidden when not logged in  
    }
  </script>
</body>
</html>
